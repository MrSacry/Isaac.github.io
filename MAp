<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Deeper Cut â€“ City Distances</title>

    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />

    <!-- Leaflet CSS -->
    <link rel="stylesheet"
          href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" />

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"></script>

    <style>
        body {
            margin: 0;
            padding: 0;
            background: whitesmoke;
            font-family: Arial, sans-serif;
        }

        #map {
            width: 80%;
            height: 540px;
            margin: 20px auto;
        }
    </style>
</head>

<body>

<div id="map"></div>

<script>

    /* ================================
       a & b) Create map, center, zoom
    ================================= */

    var mymap = L.map('map', {
        center: [40.0, -77.0],
        zoom: 6
    });

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(mymap);

    /* ================================
       c) City objects with properties
    ================================= */

    var newYork = {
        name: "New York",
        latlng: [40.7128, -74.0060],
        phillyDistance: 95
    };

    var washington = {
        name: "Washington DC",
        latlng: [38.9072, -77.0369],
        phillyDistance: 140
    };

    var columbus = {
        name: "Columbus",
        latlng: [39.9612, -82.9988],
        phillyDistance: 470
    };

    /* ================================
       e) Determine season using Date
    ================================= */

    var d = new Date();
    var month = d.getMonth();
    var season = "";

    if (month <= 2) {
        season = "Winter";
    } else if (month <= 5) {
        season = "Spring";
    } else if (month <= 8) {
        season = "Summer";
    } else {
        season = "Fall";
    }

    /* ================================
       h) Custom icon for Washington DC
    ================================= */

    var capitolIcon = L.icon({
        iconUrl: "https://upload.wikimedia.org/wikipedia/commons/e/e4/White_house_icon.png",
        iconSize: [40, 40]
    });

    /* ================================
       a, d, g) Markers + popups
    ================================= */

    var nyMarker = L.marker(newYork.latlng).addTo(mymap);
    nyMarker.bindPopup(
        "In <span style='color:blue'>" + newYork.name + "</span>, " +
        "which is " + newYork.phillyDistance +
        " miles from Philadelphia, it is " + season + "."
    );

    var dcMarker = L.marker(washington.latlng, { icon: capitolIcon }).addTo(mymap);
    dcMarker.bindPopup(
        "In " + washington.name +
        ", which is " + washington.phillyDistance +
        " miles from Philadelphia, it is " + season + "."
    );

    var colMarker = L.marker(columbus.latlng).addTo(mymap);
    colMarker.bindPopup(
        "In " + columbus.name +
        ", which is " + columbus.phillyDistance +
        " miles from Philadelphia, it is " + season + "."
    );

    /* ================================
       f) prompt + do/while
    ================================= */

    do {
        var citySelect = prompt(
            "Type: New York, DC, or Columbus"
        );

        if (citySelect === "New York") {
            nyMarker.openPopup();
        }
        else if (citySelect === "DC") {
            dcMarker.openPopup();
        }
        else if (citySelect === "Columbus") {
            colMarker.openPopup();
        }

    } while (
        citySelect !== "New York" &&
        citySelect !== "DC" &&
        citySelect !== "Columbus"
    );

</script>

</body>
</html>
